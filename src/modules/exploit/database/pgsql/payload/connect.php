<?php
$ret = array('code'=>0, 'msg'=>'');
if(function_exists('pg_connect')){
    $pass = $password ?: '';
    $des = "host={$host} port={$port} dbname={$database} user={$user} password={$pass}";
    $conn = pg_connect($des);
    if(!$conn){
        $ret['code'] = -1;
        $ret['msg'] = 'Connect failed: '.pg_errormessage($conn);
        $ret['msg'] = base64_encode($ret['msg']);
    }else{
        $ret['code'] = 1;
        @pg_close($conn);
    }
}
echo json_encode($ret);